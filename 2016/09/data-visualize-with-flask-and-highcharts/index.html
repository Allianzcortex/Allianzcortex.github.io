<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.69.2 with theme Tranquilpeak 0.4.7-BETA">
<meta name="author" content="Haozhou Wang">
<meta name="keywords" content="tech">
<meta name="description" content="data visualization with the back-end Flask and front-end Highcharts">


<meta property="og:description" content="data visualization with the back-end Flask and front-end Highcharts">
<meta property="og:type" content="article">
<meta property="og:title" content="Data Visualize With Flask and Highcharts">
<meta name="twitter:title" content="Data Visualize With Flask and Highcharts">
<meta property="og:url" content="https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">
<meta property="twitter:url" content="https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">
<meta property="og:site_name" content="BBBB LLLL OOOO GGGG">
<meta property="og:description" content="data visualization with the back-end Flask and front-end Highcharts">
<meta name="twitter:description" content="data visualization with the back-end Flask and front-end Highcharts">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2016-09-08T14:30:05">
  
  
    <meta property="article:modified_time" content="2016-09-08T14:30:05">
  
  
  
    
      <meta property="article:section" content="Data">
    
  
  
    
      <meta property="article:tag" content="Python">
    
      <meta property="article:tag" content="FrontEnd">
    
  


<meta name="twitter:card" content="summary">











  <meta property="og:image" content="https://Allianzcortex.github.io/avatar.jpg">
  <meta property="twitter:image" content="https://Allianzcortex.github.io/avatar.jpg">


    <title>Data Visualize With Flask and Highcharts</title>

    <link rel="icon" href="https://Allianzcortex.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://Allianzcortex.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://Allianzcortex.github.io/">BBBB LLLL OOOO GGGG</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://Allianzcortex.github.io/#about">
    
    
    
      
        <img class="header-picture" src="https://Allianzcortex.github.io/avatar.jpg" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://Allianzcortex.github.io/#about">
          <img class="sidebar-profile-picture" src="https://Allianzcortex.github.io/avatar.jpg" alt="Author&#39;s picture" />
        </a>
       
        
          <h5 class="sidebar-profile-bio">@Arctic Wolf, ex-coop @Dash Hudson</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://Allianzcortex.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://Allianzcortex.github.io/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://Allianzcortex.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://Allianzcortex.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://Allianzcortex.github.io/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/Allianzcortex" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://Allianzcortex.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Data Visualize With Flask and Highcharts
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2016-09-08T14:30:05Z">
        
  September 8, 2016

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://Allianzcortex.github.io/categories/data">Data</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>data visualization with the back-end Flask and front-end Highcharts</p>
<h4 id="what-happened">What Happened</h4>
<p>Our company uses Alibaba&rsquo;s open source <code>zeus</code> and combines scripts to build a schedule system. There was a phenomenon of sudden collapse of the job in the evening (the early warning SMS burst), and the data could only be rewashed during the day. After research, it is found that the task is way too intensive in a certain period of time and excessive parallel pressure is the cause. The time of the <code>ods/mds/ads</code> table needs to be reasonably distributed. However, the zeus system itself does not provide the function of the query scheduling task, so it is necessary to implement the visualization of a task distribution.</p>
<h4 id="flask-backend-framework">Flask Backend Framework</h4>
<p>Although usually I&rsquo;m used to use <code>Django</code>, but it is too heavy as a <code>Full-Stack Framework</code>,the registration and login functions inside will not be used. So I switch to Flask:query from MySQL in real time, convert the result with the built-in <code>jsonify</code> and return it to the front-end page.</p>
<p>Zeus&rsquo;s scheduling time format is similar to <code>crontab</code>, so in order to generate the required data directly on the backend, it should convert the time into an <code>int</code> value. such as:</p>
<pre><code>original time    show time
0 10 1（means 1:10） 110
0 16 0 （means 12:16）   16
0 30 23（means evening 11:30） 2330
</code></pre><p>If the time does not meet the four positions when you look at it, you need to complete the leading zero to see.</p>
<p>The core of time is as follows:</p>
<p>&ldquo;starthighlight&rdquo;
for row in cur.fetchall():
key = row[1].split()
if key[2]!='0&rsquo; and key[1]=='0&rsquo;:
key=10*int(key[2]+key[1])
else:
key = int(key[2] + key[1])
&ldquo;endhighlight&rdquo;</p>
<p>configuring post data:</p>
<p>&ldquo;starthighlight&rdquo;
@app.route('/timeserialize&rsquo;, methods=[&lsquo;GET&rsquo;, &lsquo;POST&rsquo;])
def get_json():
# calculate some data
return jsonify(result)
&ldquo;endhighlight&rdquo;</p>
<h4 id="highcharts-frontend-framework">Highcharts FrontEnd Framework</h4>
<p>There are two famous visualization framework,one is <a href="https://ecomfe.github.io/echarts-doc/public/en/index.html">Echarts</a> opensourced by Baidu,and the other is <a href="https://www.highcharts.com/">Highcharts</a> opensourced by Google(D3.js is mainly for animation).I choose the latter one.</p>
<p>Adding the resource files firstly.</p>
<pre><code>&lt;script src=&quot;http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;{{ url_for('static', filename='styles.css') }}&quot;&gt;
    &lt;!-- jquery.min.js must put before highcharts.js 之前 --&gt;
    &lt;script src=&quot;{{ url_for('static', filename='jquery.min.js') }}&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;{{ url_for('static', filename='highcharts.js') }}&quot;&gt;&lt;/script&gt;

</code></pre><p>Then use <code>jquery</code> to configure JSON data in POST format.</p>
<pre><code>&lt;script&gt;
$(function () {
    $.getJSON('/timeserialize', function (data) {
    /*$.getJSON('/configure', function (data) {*/
        $('#container').highcharts({
            // legend,option...data
        });
    });
});
&lt;/script&gt;


</code></pre><h4 id="first-version">First Version</h4>
<p>The display after the first version is as follows：</p>
<p><img src="https://Allianzcortex.github.io/images/figure-1.png" alt="figure-1"></p>
<p><img src="https://Allianzcortex.github.io/images/figure-2.png" alt="figure-2"></p>
<p>The number of points refers to the number of jobs running at the current point in time. Drag and drop to see changes in a finer time dimension.</p>
<h4 id="second-version">Second Version</h4>
<p>After combining the obtained time format and the specific number of seconds,
You can get the specific execution time of the task, and transfer it to unixtime and pass it to the front end, then turn it to specific time, the visual effect will be better.</p>
<p>The key is to add a function to the JSON format in <code>$function()</code>.</p>
<pre><code>var jsonData = data;
var jsonDataSuccess = new Array();
var jsonDataFailed = new Array();
# ...
tempArray.push(parseInt(jsonData[i].startTime) + 28800000,parseInt(jsonData[i].spendTime));
# ...
</code></pre><p>In the <code>series</code>, use two types to mark:</p>
<pre><code>    series:[{
            name:'success',
            color:'rgb(119,152,191)',
            data:jsonDataSuccess,
            },{
            name:'failed',
            color:'rgb(255,0,0)',
            data:jsonDataFailed
            }
                    ]
</code></pre><p>Using the formatter() option in <code>tooltip</code> to return a more friendly expression:</p>
<pre><code>tooltip:{
    formatter: function() {
        //...
        return 'jobid :' + jobId + '&lt;br&gt;' + &quot;jobName:&quot; + jobName + '&lt;br&gt;'  + 'starttime :' + startTime
    }
}
</code></pre><p>The resulting visualization results are as follows:</p>
<p><img src="https://Allianzcortex.github.io/images/figure-3.png" alt="figure-3"></p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://Allianzcortex.github.io/tags/python/">Python</a>

  <a class="tag tag--primary tag--small" href="https://Allianzcortex.github.io/tags/frontend/">FrontEnd</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://Allianzcortex.github.io/2016/12/a-problem-about-urlencodespace-and-20/" data-tooltip="A Problem about urlencode,space and 20%">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://Allianzcortex.github.io/2016/05/what-do-i-get-after-reading-python-open-source-projects/" data-tooltip="What do I get after Reading Python Open Source Projects">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Haozhou Wang. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://Allianzcortex.github.io/2016/12/a-problem-about-urlencodespace-and-20/" data-tooltip="A Problem about urlencode,space and 20%">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://Allianzcortex.github.io/2016/05/what-do-i-get-after-reading-python-open-source-projects/" data-tooltip="What do I get after Reading Python Open Source Projects">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://Allianzcortex.github.io/2016/09/data-visualize-with-flask-and-highcharts/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
        
          <a class="post-action-btn btn btn--default" href="#">
        
          <i class="fa fa-list"></i>
        </a>
      </li>
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2FAllianzcortex.github.io%2F2016%2F09%2Fdata-visualize-with-flask-and-highcharts%2F">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2FAllianzcortex.github.io%2F2016%2F09%2Fdata-visualize-with-flask-and-highcharts%2F">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3A%2F%2FAllianzcortex.github.io%2F2016%2F09%2Fdata-visualize-with-flask-and-highcharts%2F">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://Allianzcortex.github.io/avatar.jpg" alt="Author&#39;s picture" />
    
    
    
      <div id="about-card-bio">@Arctic Wolf, ex-coop @Dash Hudson</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Full Stack / Backend Developer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Halifax,NS
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://Allianzcortex.github.io/images/cover-v1.2.0.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://Allianzcortex.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/Allianzcortex.github.io\/2016\/09\/data-visualize-with-flask-and-highcharts\/';
          
            this.page.identifier = '\/2016\/09\/data-visualize-with-flask-and-highcharts\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'hugo-tranquilpeak-theme';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




    
  </body>
</html>

